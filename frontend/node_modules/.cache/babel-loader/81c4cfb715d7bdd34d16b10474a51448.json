{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Users/Felip/Desktop/tokenlab/events-manager/frontend/src/Screens/myEvents.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useState, useEffect } from 'react';\nimport { useCookies } from \"react-cookie\";\nimport Lista from \"../Components/listEvents\";\nimport Popup from \"../Components/popup\";\nimport \"./css/myEvents.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction MyEvents() {\n  _s();\n\n  const [email, setEmail] = useState(\"\");\n  const [id, setId] = useState(\"\");\n  const [cookies, setCookie, removeCookie] = useCookies(['user']);\n  const [popup, setPopup] = useState(null);\n  const [currState, setState] = useState({\n    'events': [],\n    'pulledEvents': false\n  });\n  const navigate = useNavigate();\n  useEffect(() => {\n    async function fetchData() {\n      await axios.post(\"http://localhost:5300/api/users/token\", {\n        token: cookies.user\n      }).then(res => {\n        setEmail(res.data.email);\n        setId(res.data.id);\n      }).catch(e => {\n        console.log(e);\n      });\n    }\n\n    fetchData();\n  }, []);\n\n  function changePulledEvents() {\n    let stateCopy = JSON.parse(JSON.stringify(currState));\n    stateCopy.pulledEvents = false;\n    setState(stateCopy);\n  }\n\n  function listas() {\n    return /*#__PURE__*/_jsxDEV(Lista, {\n      id: id,\n      refresh: changePulledEvents,\n      setPopup: setPopup\n    }, id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 17\n    }, this);\n  }\n\n  function logout() {\n    removeCookie('user');\n    navigate('/login');\n  }\n\n  function closePopup() {\n    setPopup(null);\n    console.log(popup);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"MyEventsBody\",\n    children: [popup && /*#__PURE__*/_jsxDEV(Popup, {\n      refresh: changePulledEvents,\n      event: popup,\n      closePopup: closePopup\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      id: \"myevents-nav-bar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Bem vindo(a), \", email.split(\"@\")[0]]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"myevents-logout\",\n        onClick: logout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this), id && listas()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MyEvents, \"4yxXebWNxG0hLlVi06PIULV0tow=\", false, function () {\n  return [useCookies, useNavigate];\n});\n\n_c = MyEvents;\nexport default MyEvents;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyEvents\");","map":{"version":3,"names":["axios","useNavigate","useState","useEffect","useCookies","Lista","Popup","MyEvents","email","setEmail","id","setId","cookies","setCookie","removeCookie","popup","setPopup","currState","setState","navigate","fetchData","post","token","user","then","res","data","catch","e","console","log","changePulledEvents","stateCopy","JSON","parse","stringify","pulledEvents","listas","logout","closePopup","split"],"sources":["/mnt/c/Users/Felip/Desktop/tokenlab/events-manager/frontend/src/Screens/myEvents.js"],"sourcesContent":["import axios from \"axios\";\nimport { useNavigate  } from \"react-router-dom\"\nimport { useState, useEffect } from 'react'\nimport { useCookies } from \"react-cookie\";\nimport Lista from \"../Components/listEvents\"\nimport Popup from \"../Components/popup\";\nimport \"./css/myEvents.css\";\n\nfunction MyEvents() {\n    const [email, setEmail] = useState(\"\");\n    const [id, setId] = useState(\"\");\n    const [cookies, setCookie, removeCookie] = useCookies(['user']);\n\n    const [popup, setPopup] = useState(null);\n\n    const [currState, setState] = useState({ 'events' : [], 'pulledEvents' : false });\n\n    const navigate = useNavigate ();\n    useEffect(() => {\n        async function fetchData() {\n            await axios.post(\"http://localhost:5300/api/users/token\", {token: cookies.user})\n            .then(res => {\n                setEmail(res.data.email);\n                setId(res.data.id);\n            }).catch(e => {\n                console.log(e);\n            });\n        } \n        fetchData();\n    }, [])\n\n    function changePulledEvents() {\n        let stateCopy = JSON.parse(JSON.stringify(currState));\n        stateCopy.pulledEvents = false;\n        setState(stateCopy);\n    }\n\n    function listas() {\n        return (<Lista key={id} id={id} refresh={changePulledEvents} setPopup={setPopup}/>)\n    }\n\n    function logout() {\n        removeCookie('user');\n        navigate('/login');\n    }\n\n    function closePopup() {\n        setPopup(null);\n        console.log(popup);\n    }\n\n    return (\n    <div className=\"MyEventsBody\">\n        {popup && <Popup refresh={changePulledEvents} event={popup} closePopup={closePopup}/>}\n        <header id=\"myevents-nav-bar\">\n            <div>Bem vindo(a), {email.split(\"@\")[0]}</div>\n            <button id=\"myevents-logout\" onClick={logout}>Logout</button>\n        </header>\n        {id && listas()}\n    </div>\n    );\n}\n\nexport default MyEvents;"],"mappings":"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"},"metadata":{},"sourceType":"module"}